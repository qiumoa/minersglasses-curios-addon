# 矿工眼镜 Curios 附属模组

为 Miner's Glasses（矿工眼镜）添加 Curios API 支持，允许将眼镜放入饰品栏使用。

## ✨ 功能特性

- ✅ 支持将所有类型的矿工眼镜放入 Curios 饰品栏（头部槽位）
- ✅ 在饰品栏中的眼镜可以正常使用透视功能
- ✅ 完整保留原mod的所有功能（冷却时间、耐久度消耗等）
- ✅ 支持所有9种眼镜类型
- ✅ 动态读取原mod的按键绑定（自动适配玩家自定义按键）

## 📦 支持的眼镜类型

| 眼镜类型 | 可见矿石 | 冷却时间 | 透视持续时间 |
|---------|---------|----------|-------------|
| 煤炭眼镜 | 煤炭 | 15秒 | 5秒 |
| 青金石眼镜 | 煤炭 + 青金石 | 15秒 | 6秒 |
| 铜眼镜 | 煤炭 + 青金石 + 铜 | 15秒 | 7秒 |
| 铁眼镜 | 煤炭 + 青金石 + 铜 + 铁 | 10秒 | 8秒 |
| 红石眼镜 | 煤炭 + 青金石 + 铜 + 铁 + 红石 | 10秒 | 9秒 |
| 金眼镜 | 煤炭 + 青金石 + 铜 + 铁 + 红石 + 金 | 10秒 | 10秒 |
| 绿宝石眼镜 | 煤炭 + 青金石 + 铜 + 铁 + 红石 + 金 + 绿宝石 | 8秒 | 11秒 |
| 钻石眼镜 | 煤炭 + 青金石 + 铜 + 铁 + 红石 + 金 + 绿宝石 + 钻石 | 8秒 | 12秒 |
| 下界合金眼镜 | 所有矿石 + 远古残骸 | 7秒 | 15秒 |

**设计理念**: 越高级的眼镜，冷却时间越短（可以更频繁使用），透视持续时间越长（每次效果更持久）

## 🔧 依赖要求

- **Minecraft**: 1.20.1
- **Forge**: 47.2.0 或更高
- **Curios API**: 5.7.2+1.20.1 或更高
- **Miner's Glasses**: 需要原mod（必须）

## 📥 安装方法

1. 确保已安装 Minecraft Forge 1.20.1
2. 下载并安装 Curios API
3. 下载并安装 Miner's Glasses 原mod
4. 将本附属mod的jar文件放入 mods 文件夹
5. 启动游戏

## 🎮 使用方法

1. 打开 Curios 饰品栏（默认按键 `G`）
2. 将矿工眼镜放入头部槽位
3. 按透视键（默认 `H`，可自定义）使用透视功能
4. 眼镜也可以继续放在头盔槽使用

## 🚀 构建项目

### 方法1: 使用自动化脚本（推荐）

双击运行：

```
build.bat
```

### 方法2: 手动命令行

```cmd
# 构建
gradlew.bat --init-script init.gradle build
```

构建成功后，JAR文件位于：

```
build/libs/minersglasses-curios-addon-1.0.4.jar
```

### 国内加速

本项目已配置阿里云Maven镜像，加快下载速度。配置文件：

- `init.gradle` - Gradle全局镜像配置
- `build.gradle` - 项目依赖镜像
- `settings.gradle` - 插件镜像

## 📝 更新日志

### v1.0.4 (2025-10-29)

- 🎨 **重大改进**: 重新设计透视持续时间系统
  - 持续时间现在独立于冷却时间
  - 越高级的眼镜，透视持续时间越长（煤炭5秒 → 下界合金15秒）
  - 冷却时间保持原设计（越高级越短，可更频繁使用）
- 🐛 **修复**: 移除命令执行时的聊天消息输出
  - 使用 `.withSuppressedOutput()` 静默执行命令
  - 玩家不会再看到 "已召唤实体" 或 "已杀死实体" 的消息

### v1.0.3 (2025-10-29)

- 🐛 **修复**: 完善透视持续时间的边缘情况处理
  - 眼镜耐久为0自动销毁后仍能正确清除透视
  - 玩家手动丢弃眼镜后仍能正确清除透视
  - 正确处理多个同类型眼镜的情况

### v1.0.2 (2025-10-28)

- 🐛 修复：增强按键绑定反射机制，尝试多种可能的类名
- 🔧 修复：延迟初始化按键绑定，确保原mod已加载
- 📊 新增：详细的调试日志输出
- 📚 新增：完整的调试指南文档
- 🔧 优化：数据包结构配置

### v1.0.1 (2025-10-27)

- 🔧 修复：添加缺失的冷却状态检查
- 🚀 优化：配置国内镜像加速
- 📚 改进：完善文档和构建脚本

### v1.0.0

- ✨ 初始发布
- ✅ 支持将眼镜放入Curios饰品栏
- ✅ 完整的透视功能支持
- ✅ 动态按键绑定读取

## 🐛 已知问题

目前没有已知问题。如发现问题请提交 Issue。

## 💡 常见问题

**Q: 可以同时在头盔槽和饰品栏放眼镜吗？**
A: 可以，但透视功能会优先检测头盔槽的眼镜，也就是说如果眼镜在头盔栏位，则会优先使用远mod的眼镜机制，本mod逻辑不会执行。

**Q: 冷却时间和原mod一样吗？**
A: 不一样，本附属mod保留了原mod的冷却机制，但是持续时间机制重写了，但是只有在饰品栏位才有效，。

## 📜 许可证

本项目基于原mod（Miner's Glasses）开发，仅作为功能扩展附属模组。

## 👤 作者

QiuMo

## 🙏 致谢

- Miner's Glasses 原mod作者：Pathetic
- Curios API 作者：TheIllusiveC4
